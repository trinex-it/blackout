# NNH Security - Default Configuration
# Copy this file to your application.yml or application.properties and customize as needed

nnh:
  security:
    # Enable/disable entire security system
    enabled: true

    # Use JPA repositories (set false for custom UserDetailsService)
    use-jpa: true

    # Use in-memory authentication (for testing only!)
    use-in-memory-auth: false

    # Expose default AuthController (set false to use custom controller)
    expose-controller: true

    jwt:
      # Base64-encoded secret key (REQUIRED - minimum 256 bits when decoded)
      # Generate a secure key with: openssl rand -base64 32
      secret: CHANGE_THIS_TO_A_SECURE_BASE64_ENCODED_SECRET_KEY

      access-token:
        expiration:
          # Access token expiration per role (in milliseconds)
          OWNER: 900000       # 15 minutes
          ADMIN: 900000       # 15 minutes

      refresh-token:
        expiration:
          # Refresh token expiration per role (in milliseconds)
          OWNER: 7776000000   # 90 days
          ADMIN: 604800000    # 7 days

    cookie:
      # HTTP-only cookie (prevents XSS attacks)
      http-only: true

      # Secure cookie (HTTPS only - set to false for local development)
      secure: true

      # SameSite attribute: Strict, Lax, None
      # Use "None" for cross-origin requests, "Lax" for same-origin
      same-site: None

      # Cookie path
      path: /

      # Cookie domain (optional - uncomment if needed)
      # domain: example.com

    cors:
      # Allowed origins for CORS
      allowed-origins:
        - http://localhost:4200
        - http://localhost:5173
        # Add your production origins:
        # - https://yourdomain.com

      # Allowed HTTP methods
      allowed-methods:
        - GET
        - POST
        - PUT
        - DELETE
        - PATCH
        - OPTIONS

      # Allowed headers
      allowed-headers:
        - "*"

      # Allow credentials
      allow-credentials: true

      # Preflight cache max age (in seconds)
      max-age: 3600

# Example configuration for testing with in-memory auth:
# ---
# nnh:
#   security:
#     use-in-memory-auth: true
#     jwt:
#       secret: test_secret_key_for_development_only_do_not_use_in_production
#
# Example configuration for custom UserDetailsService:
# ---
# nnh:
#   security:
#     use-jpa: false
#     jwt:
#       secret: YOUR_SECRET_HERE
#
# Example configuration to disable default controller:
# ---
# nnh:
#   security:
#     expose-controller: false
#     jwt:
#       secret: YOUR_SECRET_HERE
